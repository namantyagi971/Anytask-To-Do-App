<html>
<head>
    <!-- title of webpage whose value is set by controllers -->
    <title>
        
        <%= title %>
    </title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    
    <!-- font awesome stylesheet to include cool icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
    
    <!-- I have not completely rely on bootstrap, add css by my own -->
    <link rel="stylesheet" href="/css/home.css">
    
    <!-- jQUERY UI for adding datepicker for form  -->
    <link href='https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/ui-lightness/jquery-ui.css' rel='stylesheet'> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" > </script> 
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" > </script> 
</head>
<body>
    <!-- the body consists of container and some internal javascript, inside container there are three parts :  -->
    <!-- 1. page heading -->
    <!-- 2. form that contains input for description, choose-category, due-date, submit and delete task button-->
    <!-- 3. div that shows all the tasks-->

    <!--bootstrap container with basic styling -->
    <div class="mx-auto container w-50 bg-light pb-2 ">
        <!-- This marks the beginning of first part -->
        <!-- this is name of my app -->
        <h1 id ="page-heading">
            <!-- font-awesome icon -->
            <i class="fas fa-list"></i>
            Anytask To Do App
        </h1>
        <!-- first part ends and second part starts -->
        <!-- form to take input task from user -->
        <form action="/create-task" method="POST">
            <!-- this div contains description, choose category and due date -->
            <div class="to-do-form">
                <!-- this div contains description that takes input through textarea  -->
                <div>
                    <label for="inputDescription" class="form-label mt-2 h5">Description</label>
                    <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" placeholder="What you need to do?" name="description"></textarea>
                </div>
                <!-- This div contains two child div for choose category and due date respectively.-->
                <!-- I have used bootstrap grid system to build which contains one row and two columns -->
                <div class="row mt-2 controls">
                    <!-- This div enables user to choose a category from dropdown list  -->
                    <div class="col-6">
                        <label for="inputCategory" class="form-label h5">Choose Category</label>
                        <select name="choose_category" id="inputCategory" class="form-select">
                            <option selected>Choose a category</option>
                            <option>Personal</option>
                            <option>Office</option>
                            <option>School</option>
                            <option>Cleaning</option>
                            <option>Others</option>
                        </select>
                    </div>
                    <!-- This div enables user to pick the date from calendar -->
                    <!-- I have used jQuery UI for datepicker -->
                    <div class="col-6 last-child">
                        <label for="inputDueDtae" class="form-label h5">Due Date</label>
                        <input type="text" class="form-control" name="due_date" placeholder="Due Date" id="my_date_picker">
                    </div>
                </div>
            </div>
            <!--this div consists of two buttons for adding and deleting the task -->
            <div class="col-md-12 text-center mt-4">
                <!-- button type : submit to submit the form for adding the task -->
                <button id="add-task" type="submit" class="btn btn-primary btn-lg">
                    <span class ="h4">
                        <!-- font awesome icon -->
                        <i class="fas fa-plus"></i>
                        Add Task
                    </span>
                </button>
                <!-- This is delete task button within anchor tag .Initially anchor tag attribute is empty, -->
                <!-- when the user selects items for deleting the task, then the attribute value become url through js file-->
                <!-- Clicking on button, will take to url route -->
                <a href=""><button id ="delete-task" type="button" class="btn btn-danger btn-lg">
                    <span class ="h4">
                        <i class="fas fa-trash-alt"></i>
                        Delete Task
                    </span>
                    </button>
                </a>
            </div>
        </form>
        <!-- second part ends and third part begins -->
        <!-- this div display all task and is scrollable -->
        <div id="display-task" class= "mt-4">
           <% for(let task of all_tasks) { %> 
                <!-- this div display particular task and uses flex,it contains three child div : -->
                <!-- 1. checkbox to select task for deletion -->
                <!-- 2. task description and due date -->
                <!-- 3. task category -->
                <div class="d-flex tasks justify-content-between flex-wrap p-2">
                    <!-- this div contains checkboxes and has attribute id to store task id  -->
                    <!-- which helps in deleting the task -->
                    <div class=mt-2>
                        <input class ="check" type ="checkbox" id="<%= task._id %>" class="mt-3">
                    </div>
                    <!-- this div contains two paragraph for task description and due date respectively  -->
                    <div class="task-desc-and-task-due-date">
                        <!-- if task description is empty -->
                        <p class="m-0 text-success h4"><% if(task.description=='') {%>
                            <!-- no description will be printed -->
                            No description
                            <!-- otherwise -->
                            <% } else { %>
                            <!-- task with input description will be printed -->
                            <%= task.description %>
                            <% } %>
                        </p>
                        <p class="mt-2 h6 text-secondary"> 
                            <!-- font awesome calendar icon -->
                            <i class="far fa-calendar-alt"></i>
                            <!-- if due date is empty -->
                            <% if(task.due_date=='') { %>
                            <!-- No deadline will be printed  -->
                            No Deadline
                            <!-- otherwise -->
                            <% } else { %>
                            <!-- input due date will be printed -->
                            <%= task.due_date %>
                            <% } %>
                        </p>
                    </div>
                    <!-- this div print task category, if the task category is 'Choose a category' then div -->
                    <!-- will have visibility : hidden by external CSS otherwise task category will be printed -->
                    <div class="task-category ">
                       <%= task.choose_category %>
                    </div>
                </div>
            <% } %>  
        </div>
        <!-- third part ends -->
    </div>
    <!-- container div ends -->
    
    <!-- javascript -->
    
    <!-- for animated 3-D background -->
    <!-- these javascript files are used -->
    <script type="text/javascript" src="/js/three.r119.min.js"></script>
    <script type="text/javascript" src="/js/vanta.waves.min.js"></script>
    
    <!-- these are used for controlling animated 3-D background property-->
    <script>
    VANTA.WAVES({
      el: "body",
      mouseControls: true,
      touchControls: true,
      gyroControls: false,
      minHeight: 200.00,
      minWidth: 200.00,
      scale: 1.00,
      scaleMobile: 1.00,
      color: 0x253448
    })
    </script>

    <!-- this is path of plain javascript -->
    <script type="text/javascript" src="/js/home.js"></script>

    <!-- javascript for date picker -->
    <script type=text/javascript>
        $(document).ready(function(){
        $('#my_date_picker').datepicker({
            dateFormat : "dd-mm-yy",  // By default format is mm-dd-yy, i have reset to dd-mm-yy
            firstDay : 1,             // By default First day is sunday in datepicker, i have reset to monday
            minDate : '0d'            // this is added so that user cannot select past days for due date
            });
        });
    </script>
</body>
</html>

<!-- this is the end of ejs file :) -->